FROM node:20-alpine

COPY ./package.json .
RUN npm install --production
RUN npm run build:ts
COPY . . 
EXPOSE 4004
ENTRYPOINT [ "npm", "run", "start:prd" ]

USER node